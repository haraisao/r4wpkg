#
#  Copyroght(C) 2019, Isao Hara
#

これは、Ros4Winをインストールするためのコマンドおよびバッチファイルです。

ネットワークからアーカイブをダウンロードして、USBメモリにRos4Winの開発環境をインストールすることができます。


1．Ros4Winのためのサードパティライブラリについて
　ROSのパッケージを動作させるには、さまざまなライブラリが必要です。
　Ros4Winでは、下のライブラリをインストールすることができます。

　　ASSIMP.tgz			：Open Asset Import Library（モデルファイルの読込に使います）
　　Eigen3.tgz			：行列計算のためのライブラリです
　　Graphviz-2.38.tgz		：ノードの構成図などのグラフ作成用のライブラリとツール群です。
　　Python37.tgz		：Python3.7.1の実行環境です。ROSに必要なcatkin_pkgやnumpy,matplotlibなどがすでにインストールされています。
　　Qt5.tgz			：Qt5.12.0の実行、開発環境です。実際に使わなそうなツールやドキュメントを省いています。
　　SDL2.tgz			：SDL2(Simple DirectMedia Layer version 2)ライブラリです。
　　SDL2_image.tgz		：SDL2の画像読込ののライブラリです。
　　TinyXML.tgz			：軽量XMLパーザです。
　　TinyXML2.tgz		：軽量XMLパーザです。TinyXMLの後継になります。
　　boost_1_68_0.tgz		：boostライブラリです。(version 1.68.0)　C++言語における便利なライブラリ群です。
　　bullet3.tgz			：bullet3(Bullet Physics SDK)のOSS版をビルドしたものですが、最低限しかありません。
　　bzip2.tgz			：ファイルの圧縮のためのライブラリです。
　　clink.tgz			：コマンドプロンプトの拡張です。引数の補完などができます。（一部ですが）
　　cmake-3.13.1-win64-x64.tgz	：cmake 3.13.1です。
　　curl.tgz			：データ転送のライブラリとツールです。curlコマンドはWindows10ではすでに標準で入っています。
　　flann-1.8.4.tgz		：高速最近傍店探索ライブラリです、
　　freeglut.tgz		：GLUT(OpenGL Utility Toolkit)のフリー版です、
　　glew2.2.tgz			：GLEW(OpenGL Extension Wrangler Library)です。
　　log4cxx.tgz			：ログ記録のためのライブラリです。
　　lz4.tgz			：データ圧縮ライブラリです。
　　ogre-1.10.12.tgz		：OGRE(Object-Oriented Graphics Rendering Engine)。3Dのシーンレンダリングのライブラリです。
　　ompl-1.4.2.tgz		：Open Motion Planning Libraryです。
　　opencv-3.4.5.tgz		：Open Computet Visionライブラリです。
　　pcl.tgz			：Point-Cloud　Libraryです。
　　qhull.tgz			：3次元モデルの凸包モデルを計算するためのライブラリです。
　　yaml-cpp.tgz		：YAMLデータのパーザです。

　以上のライブラリは、

　　　　http://hara.jpn.com/pub/ros_pkg/local/

　に置いています。
　これらのライブラリは、展開するドライブは任意ですが、\localの下に展開されることを想定しています。
　つまり、D:ドライブにRos4Winをインストールする場合には、D:\localに展開する必要があります。

　

2: Ros4Winで用意しているROSパッケージ
　Ros4Winでは、メタパッケージとして、ros_base, ros_desktop, control, plan, navigation, robot, setup があります。
　各メタパケージは、下記の通りです。

　　ros_base	: 開発コマンド(catkin)や基本的な通信、ノード生成を行うためのパッケージ群です。
		  初心者の方は、すべてインストールしてください。

　　ros_desktop	: rqt,rvizなどの一般的なツール群や各種チュートリアルを含むパッケージ群です。
		　初心者の方は、すべてインストールすることをお勧めします。

    control	: コントロールインターフェース、コントロールマネージャーなど、一般的な制御に必要なパッケージ群です。
		  このパッケージは、ロボット制御を行うためには、必須となります。
		  planメタパッケージを利用するには、インストールしてください。		  

    plan	: moveitをはじめマニピュレータを制御するためのパッケージ群です。逆キネマティクスの計算や動作計画のための
		  パッケージも含まれています。Ros4Winでは、株式会社アールティ製のcrane x7の動作確認を行っています。

    navigation	: map_serverなど移動ロボットの動作に必要なパッケージ群です。

    robot	: 各種ロボットのデバイスドライバなど低レベルの制御用パッケージ群です。Ros4Winでは、Dynamixel社のモータ制御
		  ライブラリのみを用意しています。

    setup	: Ros4WinのセットアップやROSノードを動作させるためのスクリプト群です。Ros4Winでは、必須のパッケージです。


　各パッケージは、

     http://hara.jpn.com/pub/ros_pkg/<メタパッケージ名>

  に置いています。すべてのパケージは、\opt の下に展開されることを想定していますので、Ros4Winをインストールするドライブが
　D:ドライブの場合には、tarコマンドなどで D:\optに展開してください。

　現在用意しているパッケージは、サードパーティライブラリを含めて310個ありますので、手動で個々のファイルをダウンロードし、
　展開するのは大変だと思いますので、初期インストールのためのバッチファイルと各パッケージの管理のための簡易パッケージマ
　ネージャーを用意しています。

　初心者の方は、インストールスクリプトをご利用ください。


3.インストールスクリプトによるRos4Winのインストール
　上記のパッケージ群のダウンロードとインストールのために r4wpkg.exe と install_ros4win.batの2つのスクリプトを用意しています。
　Ros4Winのインストールには、install_ros4win.batのみを使います。

　3.1 Ros4WinをUSBメモリにインストールする
　　ここでは、Ros4Winを install_ros4win.bat を利用してUSBメモリにインストールする方法を説明します。
　　USBメモリは、D:ドライブに割り当てられていると仮定します。

　　コマンドプロンプトを開き、下記のコマンドでインストールします。

　　　> install_ros4win.bat D: 
　
　　このコマンドを実行すると現在のディレクトリの下に、ros4win_pkgというディレクトを作成して、すべてのパケージを
　　ダウンロードした後に、D:ドライブに Ros4Winをインストール（パッケージの展開）を行います。

　　パッケージは、310個で約1.1GB、展開後は、ライブラリ 3.7Gバイト、ROSパッケージ720Mバイトくらいになります。

　　そのため、USBメモリは、比較的高速のものを推奨いたします。
　　私が確認したところSanDisk社製のエクストリームプロ（128GBで6000円程度）という製品がお勧めなのですが、
　　同社のクルーザーフィットという製品（64GBで1500円程度）でも動作には、支障がないと思います。


4.簡易パッケージマネージャー r4wpkg.exeについて
　現在のRos4Winでは、r4wpkg.exeという簡易パッケージマネージャーを用意しています。
　このコマンドは、python3で実装しており、パッケージリポジトリのサーバーと連携動作し、パッケージのダウンロード、
　インストール、アンインストールを行うことができます。

　また、各パッケージの依存関係やダウンロードしたライブラリのアップデートの確認等も可能ですが、まだ開発途中のため
　Linuxのaptコマンドほど高機能ではありません。今後コマンドのアップデートによりより細かいパッケージの制御が行えるように
　したいと思います。

